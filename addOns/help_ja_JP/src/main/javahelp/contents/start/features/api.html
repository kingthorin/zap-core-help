<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>
API
</title>
</head>
<body>
<h1>API</h1>
<p>
ZAPはApplication Programming Interface (API) を提供しており、ZAPとプログラムで対話する事を可能としています。
</p>
<p>
APIはJSON、HTML、XML形式で利用可能です。<br/>
APIを試したり、利用したりするためのシンプルなWeb UIが用意されており、ZAP経由でプロキシしている場合は <a href="http://zap/">http://zap/</a> というURLで、またはZAPがリッスン (待ち受け) しているホストとポート (例: <a href="http://localhost:8080/">http://localhost:8080/</a>) でアクセスできます.<br/>
</p>
<p>
デフォルトでは、ZAPが実行されているマシンからのみAPIにアクセスできます。 ZAPをプロキシとして使用できる他のマシンからのAPIアクセスを許可することも可能です。 APIの設定は<a href="../../ui/dialogs/options/api.html">オプション API画面</a>で行います.
</p>

<p>
APIは、<a href="ascan.html">アクティブスキャナー</a>など、ZAPの主要なコア機能のほとんどにアクセスする手段を提供します。<br/>
ZAPの将来のバージョンでは、API経由で利用できる機能がさらに増える予定です。
</p>

<h2><a name="filexfer">ファイル転送</a></h2>

多くのAPIエンドポイントでは、ファイルシステムとの間でファイルの読み込みや保存ができます。
<p>
コアAPIもファイルのアップロードとダウンロードをサポートしていますが、セキュリティ対策としてデフォルトでは無効になっています。
攻撃者がZAP APIにアクセスできた場合、この機能が有効になっていると、独自のスクリプトをZAPにアップロードして実行できてしまいます。 ZAPスクリプトはZAP本体と同じ権限で実行されるため、これは完全なリモートコード実行 (RCE) アクセスを意味します。
<p>
ファイル転送を有効にするには、APIキーを設定し、<a href="../../ui/dialogs/options/api.html#filexferenabled">オプション API画面</a>で有効化する必要があります。
この画面のヘルプで説明されているように、コマンドライン経由でファイル転送を有効にすることも可能です。
<p>
ファイル転送を有効にすると、「other」エンドポイントの「fileUpload」を使用してテキストファイルを<a href="../../ui/dialogs/options/api.html#xferdir">転送ディレクトリ</a>にアップロードし、「fileDownload」を使用してそこからダウンロードできるようになります。
サブディレクトリ (例: "subdir/myfile") を指定することは可能ですが、別のディレクトリとの間でファイルをアップロードまたはダウンロードしようとする試み (例: "../../" の使用) は拒否されます。
「fileUpload」エンドポイントはPOSTリクエストのみを受け付け、エンコーディングは "multipart/form-data" または "application/x-www-form-urlencoded" のいずれかを使用する必要があります。 
Web UIからは、ローカルファイルを選択してアップロードできます。
<p>
ファイルをアップロードするためのcURLの例：
<pre>
curl \
    -F fileContents=@/full/path/to/file/to/be/uploaded \
    -F apikey=your-api-key \
    -F fileName=destination-filename \
    http://localhost:8080/OTHER/core/other/fileUpload/
</pre>
<p>
別のAPIエンドポイントによって生成されたファイルをダウンロードするには、"${XFER}" で始まるファイル名/パスを指定する必要があります。
例えば、コンテキストを "${XFER}/contexts/my.context" にエクスポートし、その後 "contexts/my.context" を指定してダウンロードするといったことが可能です。
<p>
別のAPIエンドポイントにファイルをアップロードするには、逆の手順を実行する必要があります。まず、ファイルをアップロードし (例: "plans/myplan.yaml")、その後、"${XFER}/plans/myplan.yaml" というパスを介してインポートします。


<h2>関連情報</h2>
<table>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td>
<a href="../../ui/overview.html">UIの概要</a></td><td>ユーザーインターフェースの概要について</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td>
<a href="https://www.zaproxy.org/docs/api/#introduction">APIの概要</a></td><td>APIの概要について</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td>
<a href="features.html">機能</a></td><td>ZAPが提供する機能について</td></tr>
</table>

</body>
</html>
