<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>認証</title>
</head>
<body>
	<h1>認証</h1>
	ZAPは幅広い認証メカニズムに対応できます。<br>
	ZAP自動化が初めての場合は、ZAPの 
	<a href="https://www.zaproxy.org/docs/authentication/">認証決定木</a> (外部リンク) から始めるのが最適です。
	<p>
	各 <a href="contexts.html">コンテキスト</a> には以下があります：
	<ul>
	<li>認証の処理方法を定義する<a href="authmethods.html">認証方式</a>。 
	認証は、認証されたWebアプリケーション<a href="users.html">ユーザー</a>に対応するWebセッションを作成するために使用されます.</li>
	<li>ZAPがメッセージが認証済みリクエストに対応しているかを検出する方法を定義する<a href="authstrategies.html">認証検証戦略</a>。</li>
	</ul>
	Webアプリケーションで機能する認証方式と検証戦略の任意の組み合わせを使用できます。
	<p>
	Webサイト/Webアプリケーションでユーザーの認証を実行するために、認証方式と検証戦略は認証の実行方法 (プロセス) を定義しますが、必要な認証情報 (正確な識別子) はユーザーに依存するため、ZAPではユーザーで設定されます。
	<p>
	Webアプリケーションの認証を設定するために必要な一般的な <b>主要手順</b> は以下の通りです：
	<ol>
		<li>Webアプリケーション用のZAP<a href="contexts.html">コンテキスト</a>を設定し、必要なすべてのURLが含まれていることを確認する</li>
		<li>コンテキストの<a href="sessionManagement.html">セッション管理方式</a>をアプリケーションで使用されているものに設定する</li>
		<li>アプリケーションの<a href="authmethods.html">認証方式</a>を設定し、すべての要件を指定する</li>
		<li>アプリケーションの<a href="authstrategies.html">認証検証戦略</a>を設定し、<i>ログイン済み指標</i>または<i>ログアウト済み指標</i>の少なくとも1つを指定する</li>
		<li>コンテキストの認証方式に直接対応する1つ以上の<a href="users.html">ユーザー</a>をコンテキスト用に設定する</li>
	</ol>

	<h2>設定例</h2>
	<p> <i>フォームベース認証</i>,
	<i>Cookieベースセッション管理</i> を使用し、完全なHTMLページ (ユーザーがログインしているかどうかの指標を含む) を返すWebアプリケーションを完全に設定する方法の例を以下に示します： 
	<ol>
		<li>Webアプリケーション用のコンテキストを設定する</li>
		<li>セッション管理方式を<i>Cookieベースセッション管理</i>に設定する</li>
		<li>ブラウザがZAPを経由してすべてをプロキシするようにし、ブラウザを使用してアプリケーションにログインする</li>
		<li>ZAPに移動し、ログインのために実行されたリクエストを特定する (最も一般的には、ユーザー名とパスワード、および場合によっては他の要素を含むHTTP POSTリクエスト)</li>
		<li>ログインリクエストにAnti-CSRFトークンがある場合、トークン名が存在しなければ<a href="../../ui/dialogs/options/anticsrf.html">オプション Anti-CSRF画面</a>に追加する</li>
		<li>認証方式を設定する：
			<ol>
			<li>認証リクエストを右クリックし、「コンテキストとしてフラグ付け...」> 「フォームベース認証ログインリクエスト」を選択する</li>
			<li>リクエストURLとパラメーター (ある場合) が既に含まれているウィンドウが開く。ドロップダウンオプションを使用して、どのパラメーターがユーザー名とパスワードに対応するかを選択する</li>
			</ol>
		</li>
		<li>認証検証戦略を設定する：
			<ol>
			<li>適切なログイン済みまたはログアウト済み指標を持つメッセージを選択する (例: ログアウトリンクまたはようこそメッセージ)</li>
			<li>関連するテキストを選択し、右クリックして「コンテキストとしてフラグ付け...」> 「認証ログイン済み指標」または「コンテキストとしてフラグ付け...」> 「認証ログアウト済み指標」を適切に選択する
			</ol>
		</li>
    	<li>「セッションプロパティ」 → 「ユーザーセクション」で必要な数のユーザーを定義する</li>
	</ol>
   	認証を設定すると、ZAPでさまざまなアクションが利用可能になります。例えば、スパイダーダイアログでユーザーを選択できるようになります。
	<br>
	上記のほとんどの手順は、他の認証方式にも適用されます。 異なる方式を使用して認証を設定しようとする場合に変更されるのは手順6のみです。 その代わりに、ドロップダウンリストから必要な認証方式を選択し、必要に応じて設定します。 各種類の認証の設定に関する詳細は、 <a href="authmethods.html">認証方式</a> ページおよび 
	<a href="../../ui/dialogs/session/contexts.html">コンテキストセッション画面</a>にあります<a href="#"></a>.

	<h2><a name="forceduser">強制ユーザーモード</a></h2>
	When Forced User Mode is enabled then all interactions that go through ZAP for a given context will be 
	updated to be from the perspective of the specified User.<br>
   	The Forced User Mode is enabled via a button in the toolbar (the one with the user and the lock) and 
   	is configured via Session Properties -> Forced User Mode.<br>
   	<b>Important:</b> Forced User Mode is just intended for manual testing and should not be used in automation -
   	there are much better alternatives.

	<h2><a name="envvars">Authentication Header Environmental Variables</a></h2>
	A set of environmental variables are available which allow you to easily add an authentication header to all of the requests that are proxied through ZAP or initiated
	by the ZAP tools, including the spiders and active scanner: 
	<ul>
	<li>ZAP_AUTH_HEADER_VALUE - if this is defined then its value will be added as a header to all of the requests</li>
	<li>ZAP_AUTH_HEADER - if this is defined then its value will be used as the header name - if it is not defined then the standard 
	<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization">Authorization</a> header will be used</li>
	<li>ZAP_AUTH_HEADER_SITE - if this is defined then header will only be included in sites who's name includes its value</li>
	</ul>

	<h2>設定箇所</h2>
	<table>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="../../ui/dialogs/session/contexts.html#auth">セッションプロパティダイアログ</a></td>
			<td></td>
		</tr>
	</table>

	<h2>関連情報</h2>
	<table>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="https://youtu.be/cR4gw-cPZOA">YouTube チュートリアル</a></td>
			<td>認証、セッション管理、ユーザ管理などZAPの機能について [外部リンク: https://youtu.be/cR4gw-cPZOA]</td>
		</tr>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="../../ui/overview.html">UIの概要</a></td>
			<td>ユーザーインターフェースの概要について</td>
		</tr>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="features.html">機能</a></td>
			<td>ZAPが提供する機能について</td>
		</tr>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="../../ui/dialogs/session/contexts.html">セッションコンテキスト ダイアログ</a></td>
			<td>セッションプロパティの概要について</td>
		</tr>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="users.html">ユーザー</a></td>
			<td>ユーザーの概要について</td>
		</tr>
		<tr>
			<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td><a href="anticsrf.html">Anti-CSRFトークン</a></td>
			<td>for an overview of anti-CSRF tokens</td>
		</tr>

	</table>

<h2>公式ビデオ</h2>
<table>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href="https://play.sonatype.com/watch/ttqKANDzJCAdBUkPrsz6Td">ZAP In Ten: Authentication: Basic and Digest</a> (9:57)</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href="https://play.sonatype.com/watch/B1vhaLSUsme7eA5hU8WeGB">ZAP In Ten: Authentication: Form Based</a> (12:59)</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href="https://www.zaproxy.org/addo-auth-workshop/">ZAP In Ten: ADDO Automation and Authentication Workshop</a> (8 videos)</td></tr>
</table>

</body>
</html>
